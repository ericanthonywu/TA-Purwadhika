{"ast":null,"code":"var _jsxFileName = \"/Users/ericanthonywu/Projects/TA-Purwadhika/frontend/src/views/template/Comment.jsx\";\nimport { MDBBtn, MDBIcon, MDBModal, MDBModalBody, MDBModalFooter, MDBModalHeader } from \"mdbreact\";\nimport React from \"react\";\nimport { api_url, base_url, profile_url } from \"../../global\";\nimport moment from \"moment\";\nimport { connect } from \"react-redux\";\nimport axios from 'axios';\n\nclass Comment extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.togglelike = e => {\n      if (this.props.loggedin) {\n        const likelist = this.state.likeslist ? [...this.state.likeslist] : [];\n\n        if (e.target.classList.contains('fa')) {\n          e.target.classList.remove('fa');\n          e.target.classList.add('far');\n          this.setState({\n            commentlike: this.state.commentlike - 1,\n            likeslist: likelist.filter(o => {\n              return o === this.props.id;\n            })\n          });\n          axios.post(\"\".concat(api_url, \"toogleCommentLike\"), {\n            token: this.props.token,\n            id: this.props.data._id,\n            postid: this.props.postid,\n            action: \"remove\"\n          }).catch(err => {\n            likelist.push({\n              username: this.props.username,\n              profilepicture: localStorage.getItem('profile_picture')\n            });\n            console.log(err);\n            this.setState({\n              commentlike: this.state.commentlike + 1,\n              likeslist: likelist\n            });\n          });\n        } else {\n          e.target.classList.remove('far');\n          e.target.classList.add('fa');\n          likelist.push({\n            username: this.props.username,\n            profilepicture: localStorage.getItem('profile_picture')\n          });\n          this.setState({\n            commentlike: this.state.commentlike + 1,\n            likeslist: likelist\n          });\n          axios.post(\"\".concat(api_url, \"toogleCommentLike\"), {\n            token: this.props.token,\n            id: this.props.data._id,\n            postid: this.props.postid,\n            action: \"add\"\n          }).catch(err => {\n            console.log(err);\n            this.setState({\n              commentlike: this.state.commentlike - 1,\n              likeslist: likelist.filter(o => {\n                return o === this.props.id;\n              })\n            });\n          });\n        }\n      }\n    };\n\n    this.state = {\n      commentlike: props.data.like.length || 0,\n      likeslist: props.data.like || [],\n      showlikes: false\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"comments mb-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(MDBModal, {\n      isOpen: this.state.showlikes,\n      toggle: () => this.setState({\n        showlikes: !this.state.showlikes\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(MDBModalHeader, {\n      toggle: () => this.setState({\n        showlikes: !this.state.showlikes\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"Likes List\"), React.createElement(MDBModalBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, this.state.likeslist ? this.state.likeslist.map(o => {\n      return React.createElement(\"div\", {\n        className: \"comments mb-2\",\n        onClick: () => this.props.history.push(\"/profile/\" + o.username),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: profile_url + o.profilepicture,\n        className: \"round mr-3\",\n        alt: \"aligment\",\n        width: \"40\",\n        height: \"100%\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"comment-info mr-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"bolder mr-2 pointer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, o.username)));\n    }) : \"\"), React.createElement(MDBModalFooter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(MDBBtn, {\n      color: \"secondary\",\n      onClick: () => this.setState({\n        showlikes: false\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, \"Close\"))), React.createElement(\"img\", {\n      src: profile_url + this.props.data.user.profilepicture,\n      className: \"round mr-3 pointer\",\n      alt: \"aligment\",\n      width: 40,\n      height: \"100%\",\n      onClick: () => this.props.history.push(\"/profile/\" + this.props.data.user.username),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"comment-info mr-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"bolder mr-2 pointer\",\n      onClick: () => this.props.history.push(\"/profile/\" + this.props.data.user.username),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, this.props.data.user.username), React.createElement(\"span\", {\n      className: \"normalweight\",\n      dangerouslySetInnerHTML: {\n        __html: this.props.data.comments.split(\" \").map(o => {\n          return o.charAt(0) === \"@\" ? \"<a href=\\\"\".concat(base_url, \"profile/\").concat(o.substring(1), \"\\\" target=\\\"_blank\\\" style=\\\"color:blue\\\"> \").concat(o, \" </a>\") : o;\n        }).join(\" \")\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"mt-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, moment(this.props.data.time).format(\"H:m:s\")), this.state.commentlike > 0 ? React.createElement(\"span\", {\n      className: \"mr-3 ml-3 pointer\",\n      onClick: () => this.setState({\n        showlikes: true\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, this.state.commentlike < 0 ? React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"\\u221E\") : this.state.commentlike, \" Like\", this.state.commentlike > 1 ? \"s\" : \"\", \" \") : \"\", React.createElement(\"span\", {\n      className: \"pointer \" + (this.state.commentlike > 0 ? \"\" : \"ml-3\"),\n      onClick: () => {\n        this.props.refs.comment.value += \"\".concat(this.props.refs.comment.value.charAt(this.props.refs.comment.value.length - 1) === \" \" ? \"\" : \" \", \"@\").concat(this.props.data.user.username, \" \");\n        this.props.refs.comment.focus();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"Reply\"))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(MDBIcon, {\n      className: \"pointer ml-2 like\",\n      onClick: this.togglelike,\n      fa: this.state.likeslist ? this.state.likeslist.some(e => e._id === this.props.userid) : false,\n      far: this.state.likeslist ? !this.state.likeslist.some(e => e._id === this.props.userid) : true,\n      icon: \"heart\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    })));\n  }\n\n}\n\nconst mapToStateProps = state => {\n  return {\n    token: state.user.token,\n    loggedin: state.user.loggedin,\n    userid: state.user._id,\n    username: state.user.username\n  };\n};\n\nexport default connect(mapToStateProps)(Comment);","map":{"version":3,"sources":["/Users/ericanthonywu/Projects/TA-Purwadhika/frontend/src/views/template/Comment.jsx"],"names":["MDBBtn","MDBIcon","MDBModal","MDBModalBody","MDBModalFooter","MDBModalHeader","React","api_url","base_url","profile_url","moment","connect","axios","Comment","Component","constructor","props","togglelike","e","loggedin","likelist","state","likeslist","target","classList","contains","remove","add","setState","commentlike","filter","o","id","post","token","data","_id","postid","action","catch","err","push","username","profilepicture","localStorage","getItem","console","log","like","length","showlikes","render","map","history","user","__html","comments","split","charAt","substring","join","time","format","refs","comment","value","focus","some","userid","mapToStateProps"],"mappings":"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","sourcesContent":["import {MDBBtn, MDBIcon, MDBModal, MDBModalBody, MDBModalFooter, MDBModalHeader} from \"mdbreact\";\nimport React from \"react\";\nimport {api_url, base_url, profile_url} from \"../../global\";\nimport moment from \"moment\";\nimport {connect} from \"react-redux\";\nimport axios from 'axios'\n\nclass Comment extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            commentlike: props.data.like.length || 0,\n            likeslist: props.data.like || [],\n            showlikes: false\n        }\n    }\n\n    togglelike = e => {\n        if(this.props.loggedin) {\n            const likelist = this.state.likeslist ? [...this.state.likeslist] : [];\n            if (e.target.classList.contains('fa')) {\n                e.target.classList.remove('fa');\n                e.target.classList.add('far');\n                this.setState({\n                    commentlike: this.state.commentlike - 1,\n                    likeslist: likelist.filter(o => {return o === this.props.id})\n                })\n                axios.post(`${api_url}toogleCommentLike`, {\n                    token: this.props.token,\n                    id: this.props.data._id,\n                    postid: this.props.postid,\n                    action: \"remove\"\n                }).catch(err => {\n                    likelist.push({\n                        username: this.props.username,\n                        profilepicture: localStorage.getItem('profile_picture')\n                    })\n                    console.log(err)\n                    this.setState({\n                        commentlike: this.state.commentlike + 1,\n                        likeslist: likelist\n                    })\n                })\n            } else {\n                e.target.classList.remove('far');\n                e.target.classList.add('fa');\n                likelist.push({\n                    username: this.props.username,\n                    profilepicture: localStorage.getItem('profile_picture')\n                })\n                this.setState({\n                    commentlike: this.state.commentlike + 1,\n                    likeslist: likelist\n                })\n                axios.post(`${api_url}toogleCommentLike`, {\n                    token: this.props.token,\n                    id: this.props.data._id,\n                    postid: this.props.postid,\n                    action: \"add\"\n                }).catch(err => {\n                    console.log(err)\n                    this.setState({\n                        commentlike: this.state.commentlike - 1,\n                        likeslist: likelist.filter(o => {return o === this.props.id})\n                    })\n                })\n            }\n        }\n    };\n\n    render() {\n        return (\n            <div className=\"comments mb-2\">\n                <MDBModal isOpen={this.state.showlikes} toggle={() => this.setState({\n                    showlikes: !this.state.showlikes\n                })}>\n                    <MDBModalHeader toggle={() => this.setState({\n                        showlikes: !this.state.showlikes\n                    })}>Likes List</MDBModalHeader>\n                    <MDBModalBody>\n                        {\n                            this.state.likeslist ?\n                            this.state.likeslist.map(o => {\n                                return  (\n                                    <div className=\"comments mb-2\" onClick={() => this.props.history.push(\"/profile/\"+o.username)}><img\n                                        src={profile_url+o.profilepicture}\n                                        className=\"round mr-3\" alt=\"aligment\" width=\"40\" height=\"100%\"/>\n                                        <div className=\"comment-info mr-5\"><span\n                                            className=\"bolder mr-2 pointer\">{o.username}</span>\n                                        </div>\n                                    </div>\n                                )\n                            })\n                                :\n                                \"\"\n                        }\n                    </MDBModalBody>\n                    <MDBModalFooter>\n                        <MDBBtn color=\"secondary\" onClick={() => this.setState({\n                            showlikes: false\n                        })}>Close</MDBBtn>\n                    </MDBModalFooter>\n                </MDBModal>\n                <img src={profile_url+this.props.data.user.profilepicture} className=\"round mr-3 pointer\"\n                     alt=\"aligment\" width={40} height={\"100%\"} onClick={() => this.props.history.push(\"/profile/\"+this.props.data.user.username)} />\n                <div className={\"comment-info mr-5\"}>\n                    <span className={\"bolder mr-2 pointer\"} onClick={() => this.props.history.push(\"/profile/\"+this.props.data.user.username)}>{this.props.data.user.username}</span>\n                    <span className={\"normalweight\"} dangerouslySetInnerHTML={{__html: this.props.data.comments.split(\" \").map(o => {\n                            return o.charAt(0) === \"@\" ? `<a href=\"${base_url}profile/${o.substring(1)}\" target=\"_blank\" style=\"color:blue\"> ${o} </a>` : o\n                        }).join(\" \")}}/>\n                    <div className={\"mt-2\"}>\n                        <span>{moment(this.props.data.time).format(\"H:m:s\")}</span>\n                        {\n                            this.state.commentlike > 0 ?\n                                <span className={\"mr-3 ml-3 pointer\"} onClick={() => this.setState({\n                                    showlikes: true\n                                })}>{this.state.commentlike < 0\n                                    ? <span>&infin;</span> : this.state.commentlike} Like{this.state.commentlike > 1 ? \"s\" : \"\"} </span>\n                                :\n                                \"\"\n                        }\n                        <span className={\"pointer \" + (this.state.commentlike > 0 ? \"\" : \"ml-3\")} onClick={() => {\n                            this.props.refs.comment.value += `${this.props.refs.comment.value.charAt(this.props.refs.comment.value.length - 1) === \" \" ? \"\" : \" \" }@${this.props.data.user.username} `\n                            this.props.refs.comment.focus()\n                        }}>Reply</span>\n                    </div>\n                </div>\n                <div>\n                    <MDBIcon className={\"pointer ml-2 like\"}\n                             onClick={this.togglelike}\n                             fa={this.state.likeslist ? this.state.likeslist.some(e => e._id === this.props.userid) : false} far={ this.state.likeslist ? !this.state.likeslist.some(e => e._id === this.props.userid) : true}\n                             icon=\"heart\"\n                    />\n                </div>\n            </div>\n        );\n    }\n}\nconst mapToStateProps = state => {\n    return {\n        token: state.user.token,\n        loggedin: state.user.loggedin,\n        userid: state.user._id,\n        username: state.user.username,\n    }\n}\nexport default connect(mapToStateProps)(Comment)\n"]},"metadata":{},"sourceType":"module"}